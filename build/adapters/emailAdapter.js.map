{"version":3,"sources":["../../adapters/emailAdapter.js"],"names":["transporter","createTransport","service","host","auth","user","process","env","EMAIL","pass","EMAIL_PASSWORD","sendRecoveryEmail","email","token","url","mailOptions","from","to","subject","text","encodeURIComponent","html","sendMail","err","info","console","log","messageId"],"mappings":";;;;;;;AAAA;;;;AACA;;;;;;AAEA,IAAMA,cAAc,qBAAWC,eAAX,CAA2B,uCAAc;AAC3DC,WAAS,OADkD;AAE3DC,QAAM,gBAFqD;AAG3DC,QAAM;AACJC,UAAMC,QAAQC,GAAR,CAAYC,KADd;AAEJC,UAAMH,QAAQC,GAAR,CAAYG;AAFd;AAHqD,CAAd,CAA3B,CAApB;;AASO,IAAMC,gDAAoB,SAApBA,iBAAoB,CAACC,KAAD,EAAQC,KAAR,EAAeC,GAAf,EAAuB;AACtD,MAAMC,cAAc;AAClBC,UAAM,eADY;AAElBC,QAAIL,KAFc;AAGlBM,aAAS,0BAHS;AAIlBC,wGAAkGL,GAAlG,6BAA6HM,mBAAmBR,KAAnB,CAA7H,eAAgKQ,mBAAmBP,KAAnB,CAAhK,kFAJkB;AAKlBQ,oHAA8GP,GAA9G,6BAAyIM,mBAAmBR,KAAnB,CAAzI,eAA4KQ,mBAAmBP,KAAnB,CAA5K,UAA0MC,GAA1M,6BAAqOM,mBAAmBR,KAAnB,CAArO,eAAwQQ,mBAAmBP,KAAnB,CAAxQ;AALkB,GAApB;;AAQAb,cAAYsB,QAAZ,CAAqBP,WAArB,EAAkC,UAACQ,GAAD,EAAMC,IAAN,EAAe;AAC/C,QAAGD,GAAH,EAAO;AACL,aAAOE,QAAQC,GAAR,CAAYH,GAAZ,CAAP;AACD;;AAEDE,YAAQC,GAAR,CAAY,gBAAZ,EAA8BF,KAAKG,SAAnC;AACD,GAND;AAOD,CAhBM","file":"emailAdapter.js","sourcesContent":["import nodemailer from 'nodemailer'\nimport smtpTransport from 'nodemailer-smtp-transport'\n\nconst transporter = nodemailer.createTransport(smtpTransport({\n  service: 'gmail',\n  host: 'smtp.gmail.com',\n  auth: {\n    user: process.env.EMAIL,\n    pass: process.env.EMAIL_PASSWORD\n  }\n}))\n\nexport const sendRecoveryEmail = (email, token, url) => {\n  const mailOptions = {\n    from: \"Chris Severns\",\n    to: email,\n    subject: \"Password reset requested\",\n    text: `We recently received a request to rest your password. Click here to reset your password: ${url}/resetPassword?email=${encodeURIComponent(email)}&token=${encodeURIComponent(token)} If you did not make this request, ignore this email. Your account is secure.`,\n    html: `<p>We recently received a request to rest your password. Click here to reset your password: <a href=\"${url}/resetPassword?email=${encodeURIComponent(email)}&token=${encodeURIComponent(token)}\">${url}/resetPassword?email=${encodeURIComponent(email)}&token=${encodeURIComponent(token)}</a> If you did not make this request, ignore this email. Your account is secure.</p>`,\n  }\n\n  transporter.sendMail(mailOptions, (err, info) => {\n    if(err){\n      return console.log(err)\n    }\n\n    console.log(\"Message sent: \", info.messageId)\n  })\n}"]}